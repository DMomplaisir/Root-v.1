<!DOCTYPE html>
<head>
  <title>Start a New Project</title
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
  <form name="newprotest">
    <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
    <input class="md1-textfield_input" type="text" name="protest_name" id="protest_name"></input>
    <label class="md1-textfield_label" for="protest_name"> Protest Name </label>
    <type="datetime-local" name="datetime" id="datetime"></input>

    <input class="md1-textfield_input" type="text" name="twitter_handle" id="twitter_handle"></input
    <label class="md1-textfield_label" for="twitter_handle"> Twitter Handle </label>

    <input class="md1-textfield_input" type="text" name="location" id="location"></input>
    <label class="md1-textfield_label" for="location"> Location </label>

  </div>
    <!-- perhaps connect google maps -->
    <!-- <input type="radio" name="social_causes" value="Race">
    <input type="radio" name="social_causes" value="Women's Issues">
    <input type="radio" name="social_causes" value="Enviroment">
    <input type="radio" name="social_causes" value="Media and Poltiics">
    <input type="radio" name="social_causes" value="Global Affairs"> -->

    <textarea name="event_description" id="event_description" rows="8" cols="80">Describe the protest aims</textarea>

    <input type="submit" name="submit_button" id ="submit"/>
  </form>
</body>
<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
<script>

  // Initialize Firebase
  var config = {
  apiKey: "AIzaSyCzniP0Wu1UpfyFwcs3w6PSvE95bMdA0zM",
  authDomain: "root-d486a.firebaseapp.com",
  databaseURL: "https://root-d486a.firebaseio.com",
  projectId: "root-d486a",
  storageBucket: "",
  messagingSenderId: "980123833348"
  };
  firebase.initializeApp(config);


  var database = firebase.database();
  // var protest_name = document.getElementById('protest_name').value;
  // var datetime = document.getElementById('datetime').value;
  // var twitter_handle = document.getElementById('twitter_handle').value;
  // var event_description = document.getElementById('event_description').value;




  function createProtest(protest_name, datetime, twitter_handle, location, event_description, uid){



      //assign the protest to the user

    firebase.database().ref('protests/' + protest_name).set({
      protest: protest_name,
      datetime: datetime,
      twitter: twitter_handle,
      location: location,
      description: event_description,
      /// decide how to put account
      activated: "no",
      owner_uid: uid
    });

    //assign the protest to the user
  }


  function onSubmit(){
    var protest_name = document.getElementById('protest_name').value;
    var datetime = document.getElementById('datetime').value;
    var location = document.getElementById('location').value;
    var twitter_handle = document.getElementById('twitter_handle').value;
    var event_description = document.getElementById('event_description').value;
    var user = firebase.auth().currentUser;

    if (user != null){
      var uid = user.uid;
    }
    createProtest(protest_name, datetime, twitter_handle, location, event_description,uid);
  }


  var submit = document.getElementById('submit');
  submit.addEventListener('click', onSubmit);
</script>
<script>

</script>
